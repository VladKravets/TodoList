(this.webpackJsonptodo15v2=this.webpackJsonptodo15v2||[]).push([[0],{126:function(t,e,a){},127:function(t,e,a){},152:function(t,e,a){"use strict";a.r(e);var n,i,s=a(0),c=a.n(s),o=a(31),r=a.n(o),d=(a(126),function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,216)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,s=e.getLCP,c=e.getTTFB;a(t),n(t),i(t),s(t),c(t)}))}),l=(a(127),a(19)),u=a(25),j=a(61),b=a.n(j),f=b.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"3bb1f301-4343-478c-bd6d-e432168f19d7"}}),h=function(){return f.get("todo-lists")},O=function(t){return f.post("todo-lists",{title:t})},p=function(t){return f.delete("todo-lists/".concat(t))},m=function(t,e){return f.put("todo-lists/".concat(t),{title:e})},g=function(t){return f.get("todo-lists/".concat(t,"/tasks"))},x=function(t,e){return f.delete("todo-lists/".concat(t,"/tasks/").concat(e))},v=function(t,e){return f.post("todo-lists/".concat(t,"/tasks"),{title:e})},k=function(t,e,a){return f.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var C=b.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"3bb1f301-4343-478c-bd6d-e432168f19d7"}}),y=function(t){return C.post("auth/login",t)},T=function(){return C.get("auth/me")},I=function(){return C.delete("auth/login")},A=function(t,e){t.messages.length?e(D({error:t.messages[0]})):e(D({error:"Some error occurred"})),e(z({status:"failed"}))},S=function(t,e){e(D({error:t.message})),e(z({status:"failed"}))},w=a(33),F=Object(w.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),E=F.reducer,L=F.actions.setIsLoggedInAC,_=Object(w.b)({name:"app",initialState:{status:"loading",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),N=_.reducer,P=_.actions,z=P.setAppStatusAC,D=P.setAppErrorAC,R=P.setInitializedAC,M=Object(w.b)({name:"todolists",initialState:[],reducers:{removeTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));a>-1&&t.slice(a,1)},addTodolistAC:function(t,e){t.unshift(Object(u.a)(Object(u.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].title=e.payload.title},changeTodolistFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].filter=e.payload.filter},setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.entityStatus}}}),U=M.reducer,q=M.actions,B=q.removeTodolistAC,H=q.addTodolistAC,K=q.changeTodolistTitleAC,Z=q.changeTodolistFilterAC,J=q.setTodolistsAC,Y=q.changeTodolistEntityStatusAC,V=Object(w.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(u.a)(Object(u.a)({},a[n]),e.payload.model))},setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks}},extraReducers:function(t){t.addCase(H,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(B,(function(t,e){delete t[e.payload.id]})),t.addCase(J,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))}))}}),X=V.reducer,$=V.actions,G=$.removeTaskAC,Q=$.addTaskAC,W=$.updateTaskAC,tt=$.setTasksAC,et=function(t,e,a){return function(n,i){var s=i().tasks[a].find((function(e){return e.id===t}));if(s){var c=Object(u.a)({deadline:s.deadline,description:s.description,priority:s.priority,startDate:s.startDate,title:s.title,status:s.status},e);n(z({status:"loading"})),k(a,t,c).then((function(i){var s=W({taskId:t,model:e,todolistId:a});n(s),n(z({status:"succeeded"}))}))}else console.warn("task not found in the state")}},at=a(13),nt=a(197),it=a(205),st=a(193),ct=a(1),ot=c.a.memo((function(t){console.log("AddItemForm called");var e=Object(s.useState)(""),a=Object(at.a)(e,2),n=a[0],i=a[1],c=Object(s.useState)(null),o=Object(at.a)(c,2),r=o[0],d=o[1],l=function(){""!==n.trim()?(t.addItem(n),i("")):d("Title is required")};return Object(ct.jsxs)("div",{children:[Object(ct.jsx)(nt.a,{variant:"outlined",error:!!r,value:n,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){null!==r&&d(null),13===t.charCode&&l()},label:"Title",helperText:r,disabled:"loading"===t.entityStatus}),Object(ct.jsx)(it.a,{color:"primary",onClick:l,disabled:"loading"===t.entityStatus,children:Object(ct.jsx)(st.a,{})})]})})),rt=c.a.memo((function(t){console.log("EditableSpan called");var e=Object(s.useState)(!1),a=Object(at.a)(e,2),n=a[0],i=a[1],c=Object(s.useState)(t.value),o=Object(at.a)(c,2),r=o[0],d=o[1];return n?Object(ct.jsx)(nt.a,{value:r,onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),t.onChange(r)}}):Object(ct.jsx)("span",{onDoubleClick:function(){i(!0),d(t.value)},children:t.value})})),dt=a(194),lt=a(199),ut=c.a.memo((function(t){var e=Object(s.useCallback)((function(){return t.removeTask(t.task.id,t.todolistId)}),[t.task.id,t.todolistId]),a=Object(s.useCallback)((function(e){var a=e.currentTarget.checked;t.changeTaskStatus(t.task.id,a?n.Completed:n.New,t.todolistId)}),[t.task.id,t.todolistId]),i=Object(s.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.task.id,t.todolistId]);return Object(ct.jsxs)("div",{className:t.task.status===n.Completed?"is-done":"",children:[Object(ct.jsx)(lt.a,{checked:t.task.status===n.Completed,color:"primary",onChange:a}),Object(ct.jsx)(rt,{value:t.task.title,onChange:i}),Object(ct.jsx)(it.a,{onClick:e,children:Object(ct.jsx)(dt.a,{})})]},t.task.id)})),jt=a(206),bt=c.a.memo((function(t){console.log("Todolist called");var e=Object(l.b)();Object(s.useEffect)((function(){var a,n=(a=t.id,function(t){t(z({status:"loading"})),g(a).then((function(e){var n=e.data.items,i=tt({tasks:n,todolistId:a});t(i),t(z({status:"succeeded"}))}))});e(n)}),[]);var a=Object(s.useCallback)((function(e){t.addTask(e,t.id)}),[t.addTask,t.id]),i=Object(s.useCallback)((function(e){t.changeTodolistTitle(t.id,e)}),[t.id,t.changeTodolistTitle]),c=Object(s.useCallback)((function(){return t.changeFilter("all",t.id)}),[t.id,t.changeFilter]),o=Object(s.useCallback)((function(){return t.changeFilter("active",t.id)}),[t.id,t.changeFilter]),r=Object(s.useCallback)((function(){return t.changeFilter("completed",t.id)}),[t.id,t.changeFilter]),d=t.tasks;return"active"===t.filter&&(d=t.tasks.filter((function(t){return t.status===n.New}))),"completed"===t.filter&&(d=t.tasks.filter((function(t){return t.status===n.Completed}))),Object(ct.jsxs)("div",{children:[Object(ct.jsxs)("h3",{children:[Object(ct.jsx)(rt,{value:t.title,onChange:i}),Object(ct.jsx)(it.a,{onClick:function(){t.removeTodolist(t.id)},disabled:"loading"===t.entityStatus,children:Object(ct.jsx)(dt.a,{})})]}),Object(ct.jsx)(ot,{addItem:a,entityStatus:t.entityStatus}),Object(ct.jsx)("div",{children:d.map((function(e){return Object(ct.jsx)(ut,{task:e,todolistId:t.id,removeTask:t.removeTask,changeTaskTitle:t.changeTaskTitle,changeTaskStatus:t.changeTaskStatus},e.id)}))}),Object(ct.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(ct.jsx)(jt.a,{variant:"all"===t.filter?"outlined":"text",onClick:c,color:"inherit",children:"All"}),Object(ct.jsx)(jt.a,{variant:"active"===t.filter?"outlined":"text",onClick:o,color:"primary",children:"Active"}),Object(ct.jsx)(jt.a,{variant:"completed"===t.filter?"outlined":"text",onClick:r,color:"secondary",children:"Completed"})]})]})})),ft=a(204),ht=a(211),Ot=a(14),pt=function(){var t=Object(l.c)((function(t){return t.todolists})),e=Object(l.c)((function(t){return t.tasks})),a=Object(l.c)((function(t){return t.auth.isLoggedIn})),n=Object(l.b)();Object(s.useEffect)((function(){if(a){var t=function(t){t(z({status:"loading"})),h().then((function(e){t(J({todolists:e.data})),t(z({status:"succeeded"}))}))};n(t)}}),[]);var i=Object(s.useCallback)((function(t,e){var a=function(t,e){return function(a){a(z({status:"loading"})),x(e,t).then((function(n){var i=G({taskId:t,todolistId:e});a(i),a(z({status:"succeeded"}))}))}}(t,e);n(a)}),[]),c=Object(s.useCallback)((function(t,e){var a=function(t,e){return function(a){a(z({status:"loading"})),v(e,t).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item,n=Q({task:e});a(n),a(z({status:"succeeded"}))}else a(z({status:"failed"}))})).catch((function(t){a(D({error:t.message})),a(z({status:"failed"}))}))}}(t,e);n(a)}),[]),o=Object(s.useCallback)((function(t,e,a){var i=et(t,{status:e},a);n(i)}),[]),r=Object(s.useCallback)((function(t,e,a){var i=et(t,{title:e},a);n(i)}),[]),d=Object(s.useCallback)((function(t,e){var a=Z({id:e,filter:t});n(a)}),[]),u=Object(s.useCallback)((function(t){var e,a=(e=t,function(t){t(z({status:"loading"})),t(Y({id:e,entityStatus:"loading"})),p(e).then((function(a){t(B({id:e})),t(z({status:"succeeded"}))}))});n(a)}),[]),j=Object(s.useCallback)((function(t,e){var a=function(t,e){return function(a){a(z({status:"loading"})),m(t,e).then((function(n){a(K({id:t,title:e})),a(z({status:"succeeded"}))}))}}(t,e);n(a)}),[]),b=Object(s.useCallback)((function(t){var e=function(t){return function(e){e(z({status:"loading"})),O(t).then((function(t){0===t.data.resultCode?(e(H({todolist:t.data.data.item})),e(z({status:"succeeded"}))):(e(D({error:t.data.messages[0]})),e(z({status:"failed"})))})).catch((function(t){e(D({error:t.message})),e(z({status:"failed"}))}))}}(t);n(e)}),[n]);return a?Object(ct.jsxs)(ct.Fragment,{children:[Object(ct.jsx)(ft.a,{container:!0,style:{padding:"20px"},children:Object(ct.jsx)(ot,{addItem:b})}),Object(ct.jsx)(ft.a,{container:!0,spacing:3,children:t.map((function(t){var a=e[t.id];return Object(ct.jsx)(ft.a,{item:!0,children:Object(ct.jsx)(ht.a,{style:{padding:"10px"},children:Object(ct.jsx)(bt,{id:t.id,title:t.title,tasks:a,removeTask:i,changeFilter:d,addTask:c,changeTaskStatus:o,filter:t.filter,entityStatus:t.entityStatus,removeTodolist:u,changeTaskTitle:r,changeTodolistTitle:j})})},t.id)}))})]}):Object(ct.jsx)(Ot.a,{to:"/login"})},mt=a(208),gt=a(209),xt=a(207),vt=a(210),kt=a(196),Ct=a(201),yt=a(200),Tt=c.a.forwardRef((function(t,e){return Object(ct.jsx)(yt.a,Object(u.a)({elevation:6,ref:e,variant:"filled"},t))}));function It(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.error})),a=function(e,a){"clickaway"!==a&&t(D({error:null}))};return Object(ct.jsx)(Ct.a,{open:null!==e,autoHideDuration:6e3,onClose:a,children:Object(ct.jsx)(Tt,{onClose:a,severity:"error",sx:{width:"100%"},children:e})})}var At=a(214),St=a(215),wt=a(202),Ft=a(213),Et=a(212),Lt=a(191),_t=a(106),Nt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn})),a=Object(_t.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<3&&(e.password="Min password length 3"):e.password="Required",e},onSubmit:function(e){var n;t((n=e,function(t){t(z({status:"loading"})),y(n).then((function(e){0===e.data.resultCode?(t(L({value:!0})),t(z({status:"succeeded"}))):A(e.data,t)})).catch((function(e){S(e,t)}))})),a.resetForm()}});return e?Object(ct.jsx)(Ot.a,{to:"/"}):Object(ct.jsx)(ft.a,{container:!0,justifyContent:"center",style:{padding:"30px"},children:Object(ct.jsx)(ft.a,{item:!0,justifyContent:"center",children:Object(ct.jsx)(ht.a,{style:{padding:"20px",background:"rgb(255,250,250, 0.9)"},children:Object(ct.jsx)("form",{onSubmit:a.handleSubmit,children:Object(ct.jsxs)(wt.a,{children:[Object(ct.jsxs)(Lt.a,{children:[Object(ct.jsxs)("p",{children:["To log in get registered",Object(ct.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noopener noreferrer",children:" here"})]}),Object(ct.jsx)("p",{children:"or use common test account credentials:"}),Object(ct.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(ct.jsx)("p",{children:"Password: free"})]}),Object(ct.jsxs)(Et.a,{children:[Object(ct.jsx)(nt.a,Object(u.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&Object(ct.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(ct.jsx)(nt.a,Object(u.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&Object(ct.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(ct.jsx)(Ft.a,Object(u.a)({label:"Remember me",control:Object(ct.jsx)(lt.a,{checked:a.values.rememberMe})},a.getFieldProps("rememberMe"))),Object(ct.jsx)(jt.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})})},Pt=a(57),zt=a.n(Pt);function Dt(){return Object(ct.jsxs)("div",{className:zt.a.error,children:[Object(ct.jsx)("div",{className:zt.a.errorNum,children:"404"}),Object(ct.jsx)("div",{className:zt.a.errorText,children:"Page not found!"}),Object(ct.jsx)("div",{className:zt.a.errorSmile,children:"\xaf\\_(\u30c4)_/\xaf"})]})}var Rt=function(t){t.demo;var e=Object(l.c)((function(t){return t.app.status})),a=Object(l.c)((function(t){return t.app.isInitialized})),n=Object(l.c)((function(t){return t.auth.isLoggedIn})),i=Object(l.b)();return Object(s.useEffect)((function(){i((function(t){t(z({status:"loading"})),T().then((function(e){0===e.data.resultCode?(t(L({value:!0})),t(z({status:"succeeded"}))):A(e.data,t)})).catch((function(e){S(e,t)})).finally((function(){t(R({isInitialized:!0}))}))}))}),[]),a?Object(ct.jsxs)("div",{className:"App",children:[Object(ct.jsx)(It,{}),Object(ct.jsx)(mt.a,{position:"static",children:Object(ct.jsxs)(gt.a,{children:[Object(ct.jsx)(it.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(ct.jsx)(kt.a,{})}),Object(ct.jsx)(xt.a,{variant:"h6",children:"News"}),n&&Object(ct.jsx)(jt.a,{color:"inherit",onClick:function(){i((function(t){t(z({status:"loading"})),I().then((function(e){0===e.data.resultCode?(t(L({value:!0})),t(z({status:"succeeded"}))):A(e.data,t)})).catch((function(e){S(e,t)}))}))},children:"Log out"})]})}),"loading"===e&&Object(ct.jsx)(St.a,{color:"secondary"}),Object(ct.jsx)(vt.a,{fixed:!0,children:Object(ct.jsxs)(Ot.d,{children:[Object(ct.jsx)(Ot.b,{path:"login",element:Object(ct.jsx)(Nt,{})}),Object(ct.jsx)(Ot.b,{path:"/",element:Object(ct.jsx)(pt,{})}),Object(ct.jsx)(Ot.b,{path:"404",element:Object(ct.jsx)(Dt,{})}),Object(ct.jsx)(Ot.b,{path:"*",element:Object(ct.jsx)(Ot.a,{to:"404"})})]})})]}):Object(ct.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(ct.jsx)(At.a,{})})},Mt=a(105),Ut=a(104),qt=Object(Mt.a)({tasks:X,todolists:U,app:N,auth:E}),Bt=Object(w.a)({reducer:qt,middleware:function(t){return t().prepend(Ut.a)}});window.store=Bt;var Ht=a(54);r.a.render(Object(ct.jsx)(Ht.a,{children:Object(ct.jsx)(l.a,{store:Bt,children:Object(ct.jsx)(Rt,{})})}),document.getElementById("root")),d()},57:function(t,e,a){t.exports={error:"Error_error__3TteU",errorNum:"Error_errorNum__3qXT8",errorText:"Error_errorText__2iOeB",errorSmile:"Error_errorSmile__19fHA"}}},[[152,1,2]]]);
//# sourceMappingURL=main.a72a9cbc.chunk.js.map